![Header](https://github.com/kirillsvr/Computer-club-cases/raw/main/public/images/presentation.jpg)

<br>

<p align="center">
  <a href="https://github.com/kirillsvr/Computer-club-cases.git">English</a> |
  <span>Pусский</span>
</p>

<br>

Сайт был создан для компьютерного клуба. С его помощью проводится лотерея для клиентов.

## Задачи, которые передо мной стояли

- Выделиться среди конкурентов
- Повысить средний чек
- Предотвратить злоупотребления администраторов при начислении бонусов для клиентов

## Решение

Некоторые клубы для увеличения среднего чека предлагают бонусы при пополнении баланса на определенную сумму, кто-то выдает подарки, некоторые проводят беспроигрышную лотерею с помощью лототрона.

Я решил взять механику лотереи с лототроном и немного ее усовершенствовать.

Поскольку большинство посетителей компьютерного клуба играют в CS:GO, то для них механика с кейсами и получением случайного приза является привычной. Поэтому мной было принято решение взять эту механику из CS:GO и перенести ее для проведения лотереи.

Так появился данный сайт, который выведен на телевизоры возле стойки администратора. Каждый клиент, который пополняет игровой баланс на сумму более 350 рублей участвует в лотерее и получает дополнительные деньги на игровой баланс, шоколадный батончик или газированный напиток.

Чтобы избежать злоупотреблений со стороны администраторов я интегрировал розыгрыш с программой управления компьютерным клубом SENET. Выигранные деньги сразу зачисляются на счет клиенту, а выигранные напитки или шоколадные батончики автоматически списываются со склада. Администратор не может повлиять на ход розыгрыша, подменить выигранную сумму или провести повторный розыгрыш для того же пополнения.

## Проблемы, возникшие в процессе разработки

Поскольку у SENET нет открытого API позволяющего зачислять баланс клиентам и проводить продажу товаров, мне пришлось с помощью cURL запросов авторизовывать администратора в SENET при авторизации на сайте с лотереей. А также подменять заголовки на идентичные тем, что отправляются из административной панели SENET при пополнении балансов игроков.

## Как это работает

- Администратор проходит авторизацию на своем компьютере
- Клиент пополняет баланс на сумму более 350 рублей
- Администратор вводит номер клиента на сайте с лотереей
- Происходит проверка последнего пополнения клиента на соответствие условиям акции, а также на предотвращение повторного использования одного пополнения в лотерее
- Если все прошло успешно, клиент выбирает кейс, который хочет открыть (кейсы различаются по количеству призов и вероятности выигрыша крупных призов)
- Затем администратор открывает выбранный кейс
- Запрашиваются данные из SENET об остатках товаров на складе и убирается из розыгрыша те, которых на складе нет
- Все призы перемешиваются и выбирается случайный
- Если это деньги, то они зачисляются на счет клиенту, а если напиток или шоколадный батончик, то они списываются со склада
- Данные о выигрыше заносятся в базу данных
- После этого происходит рендеринг списка призов и отдельно рендеринг выигрыша
- На сайте происходит анимация прокрутки рулетки

## Результаты

- Средний чек поднялся на 32% (с 198 рублей до 261 рубля)
- Частота посещений компьютерного клуба выросла на 10%
- Получили большое количество положительных отзывов

## Демо

Если вы хотите сами поучаствовать в лотереи, то вам необходимо сделать следующее:

1. Перейти на сайт - [Cooking Blog](https://github.com/laravel/laravel)
2. Пройти авторизацию
```
Логин - admin
Пароль - qwerty123
```

3. Ввести номер клиента
```
79001112233
```
Ваш баланс пополнится на 1 500 рублей и вы сможете открыть несколько кейсов

4. Выбрать понравившийся кейс
5. Нажать на кнопку "Открыть кейс"
6. Проследить за результатами розыгрыша
7. Повторить